var is_open=0;var t_divimg="";var lang=0;var lang_arr=Array();lang_arr[0]="Кликните мышкой для закрытия изображения.";lang_arr[1]="Click mouse to close the picture.";var Node=function(){};Node.prototype.addProp=function(a,b){if(this.properties==null){this.properties=new Object()}this.properties[a]=b};var TextNode=function(a){this.contents=a};TextNode.prototype.toString=function(){return this.contents};var SoloNode=function(a){this.tagStr=a};SoloNode.prototype=new Node();SoloNode.prototype.toString=function(){var a="<"+this.tagStr;for(name in this.properties){a+=" "+name+'="'+this.properties[name]+'"'}a+="/>";return a};var TagNode=function(a){this.tagStr=a};TagNode.prototype=new Node();TagNode.prototype.addText=function(a){this.addChild(new TextNode(a))};TagNode.prototype.toString=function(){var a=this.startTag();if(this.children!=null){a+=this.children.join(" ")}a+=this.endTag();return a};TagNode.prototype.addChild=function(a){if(this.children==null){this.children=new Array()}this.children.push(a)};TagNode.prototype.startTag=function(){var a="<"+this.tagStr;for(name in this.properties){a+=" "+name+'="'+this.properties[name]+'"'}a+=">";return a};TagNode.prototype.endTag=function(){return"</"+this.tagStr+">"};function nnnImagePreloader(d,a,c){this.callBack=c;this.div=d;this.nLoaded=0;this.nProcessed=0;this.aImages=new Array;this.nImages=a.length;for(var b=0;b<a.length;b++){this.preload(a[b])}}nnnImagePreloader.prototype.preload=function(b){var a=new Image;this.aImages.push(a);a.onload=nnnImagePreloader.prototype.onload;a.onerror=nnnImagePreloader.prototype.onerror;a.onabort=nnnImagePreloader.prototype.onabort;a.onnnImagePreloader=this;a.bLoaded=false;a.src=b};nnnImagePreloader.prototype.onComplete=function(){this.nProcessed++;if(this.nProcessed==this.nImages){this.callBack(this.div,this.aImages,this.nLoaded)}};nnnImagePreloader.prototype.onload=function(){this.bLoaded=true;this.onnnImagePreloader.nLoaded++;this.onnnImagePreloader.onComplete()};nnnImagePreloader.prototype.onerror=function(){this.bError=true;this.onnnImagePreloader.onComplete()};nnnImagePreloader.prototype.onabort=function(){this.bAbort=true;this.onnnImagePreloader.onComplete()};function nnnClass(d,e){var c=function(){if(c.preparing){return delete (c.preparing)}if(c.constr){this.constructor=c;c.constr.apply(this,arguments)}};c.prototype={};if(d){d.preparing=true;c.prototype=new d;c.prototype.constructor=d;c.constr=d}if(e){var b="constructor";for(var a in e){if(a!=b){c.prototype[a]=e[a]}}if(e[b]&&e[b]!=Object){c.constr=e[b]}}return c}function Init_doc(d,g,c){for(i=0;i<g.length;i++){var b=window.document.getElementById("el_"+i);var f=new TagNode("a");var e=new TagNode("span");var a=new SoloNode("img");e.addProp("class","nnn-ad-magnify");a.addProp("class","nnn_teaser_img");a.addProp("width","60");a.addProp("height","60");a.addProp("style","border:0");a.addProp("id",d+c[i]);f.addChild(e);f.addChild(a);b.innerHTML=f;b=this.document.getElementById(d+c[i]);b.src=d+g[i]}}function nnnElementsByClassName(f,r,d){r=r||"*";d=d||document;var t=d.getElementsByTagName(r);if(!t.length&&r=="*"&&d.all){t=d.all}var s=new Array();var a=f.indexOf("|")!=-1?"|":" ";var u=f.split(a);for(var q=0,p=t.length;q<p;q++){var o=t[q].className.split(" ");if(a==" "&&u.length>o.length){continue}var v=0;comparisonLoop:for(var h=0,g=o.length;h<g;h++){for(var e=0,b=u.length;e<b;e++){if(u[e]==o[h]){v++}if((a=="|"&&v==1)||(a==" "&&v==u.length)){s.push(t[q]);break comparisonLoop}}}}return s}function nnnInit(){var a=Array();var b=nnnElementsByClassName("nnn-ad");for(j=0;j<b.length;j++){a[j]=new nnnAd(b[j])}}var nnnAd=nnnClass(null,{div:null,items:null,thumbs:null,thumbImages:null,thumbBigImages:null,hoverTimer:null,releaseTimer:null,opened:null,dummy:null,constructor:function(a){this.div=a;this.items=nnnElementsByClassName("nnn-ad-img","*",a);this.thumbs=this.div.getElementsByTagName("img");this.divimg="";this.imgel=0;this.err=Array();this.load=Array();this.opened=Array();this.thumbImages=Array();this.thumbBigImages=Array();for(i=0;i<this.thumbs.length;i++){this.thumbImages[i]=this.thumbs[i].src;this.thumbBigImages[i]=this.thumbs[i].id;this.opened[i]=false;this.enableActions(this.thumbs[i],i)}new nnnImagePreloader(this,this.thumbBigImages,function(e,d,b){for(var c=0;c<d.length;c++){if((d[c].bError)||(d[c].bAbort)){e.err[c]=1}if(d[c].bLoaded){e.load[c]=1}}})},enableActions:function(c,b){var a=this;c.onmouseover=function(){a.hover.apply(a,[c,b])}},hover:function(f,d){if((!this.opened[d])&&(is_open==0)){if(!this.divimg){var b=this;this.divimg=t_divimg;var e=f.cloneNode(true);var a=window.document.createElement("img");var c=window.document.createElement("a");if(this.err[d]==1){this.divimg.style.background="url(/img/abort.gif) no-repeat center"}else{if(this.load[d]!=1){this.divimg.style.background="url(/img/loader3.gif) no-repeat center"}}c.appendChild(e);this.divimg.appendChild(c);this.imgel=this.divimg.getElementsByTagName("img")[0];this.imgel.alt=lang_arr[lang];this.imgel.title=lang_arr[lang];this.imgel.style.border="1px solid #c0c0c0";if(this.load[d]==1){this.imgel.src=b.thumbBigImages[d]}else{this.imgel.src="/img/blank.gif"}this.imgel.onclick=function(){b.release.apply(b,[f,d])}}if(this.divimg.style.visibility=="hidden"){this.divimg.style.visibility="visible"}this.items[d].style.zIndex=10;this.divimg.style.zIndex=10;f.style.zIndex=10;this.div.style.zIndex=200;this.opened[d]=true;var b=this;this.animate(f,0,0,400,400,180,function(){b.addBImage(d)});is_open=1}},addBImage:function(c){var b=this;if(b.err[c]==1){b.divimg.style.background="url(/img/abort.gif) no-repeat center";return}else{if(b.load[c]==1){var d=/(.*)\/(.*).(.{3})/;var a=d.exec(b.imgel.src);if(a[a.length-2]=="blank"){b.imgel.src=b.thumbBigImages[c];return}else{return}}}setTimeout(function(){b.addBImage(c)},80)},release:function(e,d){if(this.opened[d]){this.items[d].style.zIndex=0;this.div.style.zIndex=100;var c=this;var a=this.imgel;this.animate(e,0,0,60,60,100,function(){setTimeout(function(){e.src=c.thumbImages[d];c.opened[d]=false;e.style.zIndex=1},80)});c.divimg.style.visibility="hidden";var b=this.divimg.lastChild;this.divimg.removeChild(b);this.divimg="";is_open=0}},animate:function(t,p,k,l,q,f,d){var r=this.imgel;var e=this.divimg;var n=e;var b=r;if(b==null){return}if(b.style.left==""){b.style.left=0}if(b.style.top==""){b.style.top=0}var m=parseInt(b.style.left);var o=parseInt(b.style.top);var v=parseInt(b.width);var c=parseInt(b.height);var s=1;if(f>0){s=f/10}var h=p-m;if(h!=0){h/=s}var a=k-o;if(a!=0){a/=s}var g=l-v;if(g!=0){g/=s}var u=q-c;if(u!=0){u/=s}this.doFrame(e,parseInt(n.style.left),parseInt(n.style.left),0,parseInt(n.style.top),parseInt(n.style.top),0,v,l,g,c,q,u,d);this.doFrame(r,m,p,h,o,k,a,v,l,g,c,q,u,d)},doFrame:function(p,r,a,n,q,b,d,f,l,e,k,m,h,o){var c=p;if(c==null){return}r=this.moveSingleVal(r,a,n);q=this.moveSingleVal(q,b,d);f=this.moveSingleVal(f,l,e);k=this.moveSingleVal(k,m,h);c.style.left=Math.round(r)+"px";c.style.top=Math.round(q)+"px";c.style.width=Math.round(f)+"px";c.style.height=Math.round(k)+"px";c.width=Math.round(f);c.height=Math.round(k);if(r==a&&q==b&&k==m&&f==l){if(o!=null){o()}return}var g=this;setTimeout(function(){g.doFrame(p,r,a,n,q,b,d,f,l,e,k,m,h,o)},10)},moveSingleVal:function(a,b,c){if(c==0||a==b){return b}a+=c;if((c>0&&a>=b)||(c<0&&a<=b)){return b}return a}});